{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["`use strict`;\n\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst input = document.querySelector(\"#datetime-picker\");\nconst startBtn = document.querySelector(\"[data-start]\");\nconst fieldDays = document.querySelector(\"[data-days]\");\nconst fieldHours = document.querySelector(\"[data-hours]\");\nconst fieldMinutes = document.querySelector(\"[data-minutes]\");\nconst fieldSeconds = document.querySelector(\"[data-seconds]\");\n\n\n\n//choose date\n\nstartBtn.disabled = true;\n\nlet userSelectedDate;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        const selectedDate = selectedDates[0];\n        const currentDate = new Date();\n\n        userSelectedDate = selectedDate;\n        console.log(\"Обрана дата:\", userSelectedDate);\n\n        if (selectedDate <= currentDate) {\n            iziToast.show({\n                position: `topRight`,\n                iconUrl: `../img/cancel-circle.svg`,\n                color: `red`,\n                message: \"Please choose a date in the future\"\n            });\n            startBtn.disabled = true;\n        } else {\n            startBtn.disabled = false;\n        }\n    },\n};\n  \nflatpickr(input, options);\n\n//-------------------------------------------------------\n\n//time calculator\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n    return value.padStart(2, \"0\");\n}\n\n//-------------------------------------------------------\n\nlet timerId = null;\n\nstartBtn.addEventListener(\"click\", () => {\n    startBtn.disabled = true;\n    input.disabled = true;\n\n    timerId = setInterval(() => {\n        const now = new Date();\n        const diff = userSelectedDate - now;\n\n        if (diff <= 0) {\n            clearInterval(timerId);\n            updateTimerUI({ days: 0, hours: 0, minutes: 0, seconds: 0 });\n            input.disabled = false;\n            return;\n        } \n\n        const currentTime = convertMs(diff);\n        updateTimerUI(currentTime);\n\n    }, 1000);\n});\n\nfunction updateTimerUI({ days, hours, minutes, seconds }) {\n    fieldDays.textContent = addLeadingZero(days.toString());\n    fieldHours.textContent = addLeadingZero(hours.toString());\n    fieldMinutes.textContent = addLeadingZero(minutes.toString());\n    fieldSeconds.textContent = addLeadingZero(seconds.toString());\n}\n\n"],"names":["input","startBtn","fieldDays","fieldHours","fieldMinutes","fieldSeconds","userSelectedDate","options","selectedDates","selectedDate","currentDate","iziToast","flatpickr","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","value","timerId","diff","updateTimerUI","currentTime"],"mappings":"2FAQA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAM5DJ,EAAS,SAAW,GAEpB,IAAIK,EAEJ,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,MAAMC,EAAeD,EAAc,CAAC,EAC9BE,EAAc,IAAI,KAExBJ,EAAmBG,EACnB,QAAQ,IAAI,eAAgBH,CAAgB,EAExCG,GAAgBC,GAChBC,EAAS,KAAK,CACV,SAAU,WACV,QAAS,2BACT,MAAO,MACP,QAAS,oCACzB,CAAa,EACDV,EAAS,SAAW,IAEpBA,EAAS,SAAW,EAE3B,CACL,EAEAW,EAAUZ,EAAOO,CAAO,EAMxB,SAASM,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAeC,EAAO,CAC3B,OAAOA,EAAM,SAAS,EAAG,GAAG,CAChC,CAIA,IAAIC,EAAU,KAEdpB,EAAS,iBAAiB,QAAS,IAAM,CACrCA,EAAS,SAAW,GACpBD,EAAM,SAAW,GAEjBqB,EAAU,YAAY,IAAM,CAExB,MAAMC,EAAOhB,EADD,IAAI,KAGhB,GAAIgB,GAAQ,EAAG,CACX,cAAcD,CAAO,EACrBE,EAAc,CAAE,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAE,EAC3DvB,EAAM,SAAW,GACjB,MACH,CAED,MAAMwB,EAAcX,EAAUS,CAAI,EAClCC,EAAcC,CAAW,CAE5B,EAAE,GAAI,CACX,CAAC,EAED,SAASD,EAAc,CAAE,KAAAR,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACtDhB,EAAU,YAAciB,EAAeJ,EAAK,SAAU,CAAA,EACtDZ,EAAW,YAAcgB,EAAeH,EAAM,SAAU,CAAA,EACxDZ,EAAa,YAAce,EAAeF,EAAQ,SAAU,CAAA,EAC5DZ,EAAa,YAAcc,EAAeD,EAAQ,SAAU,CAAA,CAChE"}